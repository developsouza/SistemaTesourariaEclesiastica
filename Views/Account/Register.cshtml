@model SistemaTesourariaEclesiastica.ViewModels.RegisterViewModel

@{
    ViewData["Title"] = "Registrar";
    Layout = "_Layout";
}

<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="card shadow">
            <div class="card-body p-4">
                <div class="text-center mb-4">
                    <i class="bi bi-person-plus display-4 text-primary"></i>
                    <h2 class="h4 mt-2">Criar Nova Conta</h2>
                    <p class="text-muted">Preencha os dados para criar sua conta</p>
                </div>

                <form asp-action="Register" method="post">
                    <div asp-validation-summary="ModelOnly" class="alert alert-danger" role="alert"></div>
                    
                    <div class="row g-3">
                        <div class="col-12">
                            <label asp-for="NomeCompleto" class="form-label required"></label>
                            <input asp-for="NomeCompleto" class="form-control" placeholder="Nome completo" />
                            <span asp-validation-for="NomeCompleto" class="text-danger"></span>
                        </div>
                        
                        <div class="col-12">
                            <label asp-for="Email" class="form-label required"></label>
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i class="bi bi-envelope"></i>
                                </span>
                                <input asp-for="Email" class="form-control" placeholder="seu@email.com" />
                            </div>
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                        
                        <div class="col-12">
                            <label asp-for="CentroCustoId" class="form-label required"></label>
                            <select asp-for="CentroCustoId" class="form-select" asp-items="ViewBag.CentroCustoId">
                                <option value="">Selecione o centro de custo</option>
                            </select>
                            <span asp-validation-for="CentroCustoId" class="text-danger"></span>
                            <div class="form-text">
                                <i class="bi bi-info-circle me-1"></i>
                                Centro de custo ao qual você está vinculado
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <label asp-for="Password" class="form-label required"></label>
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i class="bi bi-lock"></i>
                                </span>
                                <input asp-for="Password" class="form-control" placeholder="Senha" />
                                <button class="btn btn-outline-secondary" type="button" onclick="togglePassword('Password')">
                                    <i class="bi bi-eye" id="toggleIcon1"></i>
                                </button>
                            </div>
                            <span asp-validation-for="Password" class="text-danger"></span>
                        </div>
                        
                        <div class="col-md-6">
                            <label asp-for="ConfirmPassword" class="form-label required"></label>
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i class="bi bi-lock-fill"></i>
                                </span>
                                <input asp-for="ConfirmPassword" class="form-control" placeholder="Confirmar senha" />
                                <button class="btn btn-outline-secondary" type="button" onclick="togglePassword('ConfirmPassword')">
                                    <i class="bi bi-eye" id="toggleIcon2"></i>
                                </button>
                            </div>
                            <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <div class="alert alert-info">
                            <h6 class="alert-heading">
                                <i class="bi bi-shield-check me-2"></i>
                                Requisitos da Senha
                            </h6>
                            <ul class="mb-0 small">
                                <li>Mínimo de 6 caracteres</li>
                                <li>Pelo menos uma letra maiúscula</li>
                                <li>Pelo menos uma letra minúscula</li>
                                <li>Pelo menos um número</li>
                                <li>Pelo menos um caractere especial</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="d-grid mt-4">
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-person-plus me-2"></i>
                            Criar Conta
                        </button>
                    </div>
                </form>
                
                <hr class="my-4">
                
                <div class="text-center">
                    <p class="mb-0">
                        Já tem uma conta?
                        <a asp-action="Login" class="text-decoration-none">
                            <i class="bi bi-box-arrow-in-right me-1"></i>
                            Entrar
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    
    <script>
        function togglePassword(fieldId) {
            const passwordInput = document.getElementById(fieldId);
            const toggleIcon = document.getElementById(fieldId === 'Password' ? 'toggleIcon1' : 'toggleIcon2');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.className = 'bi bi-eye-slash';
            } else {
                passwordInput.type = 'password';
                toggleIcon.className = 'bi bi-eye';
            }
        }
        
        // Validação de senha em tempo real
        document.getElementById('Password').addEventListener('input', function() {
            const password = this.value;
            const requirements = [
                { regex: /.{6,}/, text: 'Mínimo de 6 caracteres' },
                { regex: /[A-Z]/, text: 'Letra maiúscula' },
                { regex: /[a-z]/, text: 'Letra minúscula' },
                { regex: /\d/, text: 'Número' },
                { regex: /[^A-Za-z0-9]/, text: 'Caractere especial' }
            ];
            
            // Aqui você pode adicionar indicadores visuais dos requisitos
        });
        
        // Foco no primeiro campo
        document.getElementById('NomeCompleto').focus();
    </script>
}
